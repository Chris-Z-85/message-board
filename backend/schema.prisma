// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model UserSession {
  id                String    @id @default(cuid())
  displayName       String    @default("")
  sessionIdentifier String    @unique @default("")
  createdAt         DateTime? @default(now())
  messages          Message[] @relation("Message_author")
}

model Message {
  id                      String       @id @default(cuid())
  content                 String       @default("")
  createdAt               DateTime?    @default(now())
  author                  UserSession? @relation("Message_author", fields: [authorId], references: [id])
  authorId                String?      @map("author")
  parent                  Message?     @relation("Message_parent", fields: [parentId], references: [id])
  parentId                String?      @map("parent")
  replies                 Message[]    @relation("Message_parent")
  rootThread              Message?     @relation("Message_rootThread", fields: [rootThreadId], references: [id])
  rootThreadId            String?      @map("rootThread")
  from_Message_rootThread Message[]    @relation("Message_rootThread")

  @@index([authorId])
  @@index([parentId])
  @@index([rootThreadId])
}
